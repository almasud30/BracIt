!function(r){"use strict";var a={};function e(){d(),n(),h(),c()}function t(){var a,e;a=r(".mkd-blog-holder.mkd-blog-infinite-scroll"),(e=r(".mkd-infinite-scroll-trigger")).length&&mkd.window.scroll(function(){!a.hasClass("mkd-ajax-started")&&mkd.windowHeight+mkd.window.scrollTop()>e.offset().top&&(a.addClass("mkd-ajax-started"),s(a,""))})}function o(){}function i(){}function d(){r("audio.mkd-blog-audio").mediaelementplayer({audioWidth:"100%"})}function n(){var t,o,a=r(".mkd-blog-holder.mkd-blog-type-masonry");a.length&&((t=a).waitForImages(function(){t.isotope({itemSelector:"article",resizable:!1,layoutMode:"packery",packery:{columnWidth:".mkd-blog-masonry-grid-sizer"}}),t.addClass("mkd-appeared")}),o=r(".mkd-filter-blog-holder"),r(".mkd-filter").on("click",function(){var a=r(this),e=a.attr("data-filter");return o.find(".mkd-active").removeClass("mkd-active"),a.addClass("mkd-active"),t.isotope({filter:e}),!1}))}function c(){var a=r(".mkd-blog-holder.mkd-blog-type-masonry-gallery");a.length&&a.each(function(){var a=r(this);m(a),l(a),r(window).resize(function(){m(a),l(a)})})}function l(a){a.waitForImages(function(){a.isotope({itemSelector:"article",resizable:!1,layoutMode:"packery",packery:{columnWidth:".mkd-blog-masonry-gallery-grid-sizer"}}),a.addClass("mkd-appeared")})}function m(a){var e=a.find(".mkd-blog-masonry-gallery-grid-sizer").width(),t=a.find(".mkd-post-size-square"),o=a.find(".mkd-post-size-large-width"),i=a.find(".mkd-post-size-large-height"),a=a.find(".mkd-post-size-large-width-height");t.css("height",e),o.css("height",e),i.css("height",Math.round(2*e)),600<mkd.windowWidth?a.css("height",Math.round(2*e)):a.css("height",e)}function h(){var e=r(".mkd-blog-holder.mkd-blog-load-more"),t=e.hasClass("mkd-blog-type-masonry")?e.next().find(".mkd-btn"):e.find(".mkd-load-more-ajax-pagination .mkd-btn");t.on("click",function(a){a.preventDefault(),a.stopPropagation(),s(e,t)})}function s(t,a){var e=function(a){var e={nextPage:"",number:"",category:"",blogType:"",archiveCategory:"",archiveAuthor:"",archiveTag:"",archiveDay:"",archiveMonth:"",archiveYear:""};void 0!==a.data("next-page")&&!1!==a.data("next-page")&&(e.nextPage=a.data("next-page"));void 0!==a.data("post-number")&&!1!==a.data("post-number")&&(e.number=a.data("post-number"));void 0!==a.data("category")&&!1!==a.data("category")&&(e.category=a.data("category"));void 0!==a.data("blog-type")&&!1!==a.data("blog-type")&&(e.blogType=a.data("blog-type"));void 0!==a.data("archive-category")&&!1!==a.data("archive-category")&&(e.archiveCategory=a.data("archive-category"));void 0!==a.data("archive-author")&&!1!==a.data("archive-author")&&(e.archiveAuthor=a.data("archive-author"));void 0!==a.data("archive-tag")&&!1!==a.data("archive-tag")&&(e.archiveTag=a.data("archive-tag"));void 0!==a.data("archive-day")&&!1!==a.data("archive-day")&&(e.archiveDay=a.data("archive-day"));void 0!==a.data("archive-month")&&!1!==a.data("archive-month")&&(e.archiveMonth=a.data("archive-month"));void 0!==a.data("archive-year")&&!1!==a.data("archive-year")&&(e.archiveYear=a.data("archive-year"));return e}(t),o=t.data("max-pages"),i=e.nextPage;i<=o&&(e={action:"connect_mikado_blog_load_more",nextPage:(e=e).nextPage,number:e.number,category:e.category,blogType:e.blogType,archiveCategory:e.archiveCategory,archiveAuthor:e.archiveAuthor,archiveTag:e.archiveTag,archiveDay:e.archiveDay,archiveMonth:e.archiveMonth,archiveYear:e.archiveYear},r.ajax({type:"POST",data:e,url:MikadoAjaxUrl,success:function(a){i++,t.data("next-page",i);var e=r.parseJSON(a).html;t.waitForImages(function(){t.hasClass("mkd-blog-type-masonry")?(t.append(e).isotope("reloadItems").isotope({sortBy:"original-order"}),n()):t.find("article:last").after(e),setTimeout(function(){mkd.modules.blog.mkdInitAudioPlayer(),mkd.modules.common.mkdSlickSlider(),mkd.modules.common.mkdFluidVideo()},400),t.removeClass("mkd-ajax-started")})}})),i===o&&""!=a&&a.hide()}(mkd.modules.blog=a).mkdInitAudioPlayer=d,a.mkdInitBlogMasonry=n,a.mkdInitBlogMasonryGallery=c,a.mkdInitBlogLoadMore=h,a.mkdOnDocumentReady=e,a.mkdOnWindowLoad=t,a.mkdOnWindowResize=o,a.mkdOnWindowScroll=i,r(document).ready(e),r(window).on("load",t),r(window).resize(o),r(window).scroll(i)}(jQuery);